---
platform: linux

image_resource:
  type: docker-image
  source: { repository: alpine }

inputs:
  - name: binaries

params:
  target:
  prefix:

outputs:
  - name: compressed

run:
  dir: binaries
  path: ash
  args:
    - -c
    - |
      set -euo pipefail
      apk add xz
      tar --verbose --create --xz --file=../compressed/"$prefix"-"$target".tar.xz *
